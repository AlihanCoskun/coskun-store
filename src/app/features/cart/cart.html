<div class="flex h-full flex-col">
    <h2 class="mb-6 text-2xl font-semibold text-slate-900">Your Cart</h2>
    @if((items$ | async)?.length === 0){
    <div class="text-slate-600">
        Your cart is empty. Go to the products page to add items.
    </div>
    } @else {
    <ng-container [ngTemplateOutlet]="cartContent"></ng-container>
    }

    <ng-template #cartContent>
        <div class="space-y-4 flex-1 overflow-y-auto">
            @for(item of (items$ |async)!; track item){
            <div class="flex items-center justify-between rounded-xl border bg-white p-4 shadow-sm">
                <div>
                    <h3 class="text-sm font-semibold text-slate-900">
                        {{ item.product.name }}
                    </h3>
                    <p class="text-xs text-slate-500">
                        {{ item.product.price | currency : 'TRY' : 'symbol' : '1.2-2': 'tr' }}
                        each
                    </p>
                </div>

                <div class="flex items-center gap-3">
                    <input type="number" min="1" [value]="item.quantity" (change)="updateQuantity(item.product.id, $event)"
                        class="w-16 rounded border px-2 py-1 text-sm" />

                    <span class="text-sm font-semibold text-slate-900">
                        {{
                        item.product.price * item.quantity
                        | currency : 'TRY' : 'symbol' : '1.2-2': 'tr'
                        }}
                    </span>

                    <button (click)="remove(item.product)"
                        class="text-xs font-medium text-red-500 hover:text-red-600 cursor-pointer">
                        Remove
                    </button>
                </div>
            </div>
            }


            <div class="flex items-center justify-between rounded-xl border bg-slate-900 p-4 text-sm text-slate-100">
                <span>Total ({{ totalItems$ | async}} items)</span>
                <span class="text-base font-semibold">
                    {{ totalPrice$ | async | currency : 'TRY' : 'symbol' : '1.2-2': 'tr' }}
                </span>
            </div>

            <div class="flex justify-end">
                <button (click)="clear()"
                    class="rounded-full border border-slate-300 px-4 py-1.5 text-xs font-medium text-slate-700 hover:bg-slate-100 cursor-pointer">
                    Clear cart
                </button>
            </div>
        </div>
    </ng-template>
</div>